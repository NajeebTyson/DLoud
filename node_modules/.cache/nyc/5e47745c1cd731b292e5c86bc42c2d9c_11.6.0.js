var cov_epoa6j5t0=function(){var path="/home/najeeb/Workspace/webstorm/DocSync/routes/logApi.js",hash="13c934096d5cb77f3be0e966377c0ec44d58a332",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/najeeb/Workspace/webstorm/DocSync/routes/logApi.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:32}},"1":{start:{line:2,column:15},end:{line:2,column:34}},"2":{start:{line:4,column:13},end:{line:4,column:29}},"3":{start:{line:6,column:12},end:{line:6,column:45}},"4":{start:{line:7,column:16},end:{line:7,column:46}},"5":{start:{line:9,column:0},end:{line:42,column:3}},"6":{start:{line:10,column:16},end:{line:10,column:40}},"7":{start:{line:11,column:13},end:{line:11,column:36}},"8":{start:{line:13,column:4},end:{line:40,column:7}},"9":{start:{line:33,column:8},end:{line:38,column:9}},"10":{start:{line:34,column:12},end:{line:34,column:40}},"11":{start:{line:36,column:12},end:{line:36,column:31}},"12":{start:{line:39,column:8},end:{line:39,column:24}},"13":{start:{line:44,column:0},end:{line:44,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:65},end:{line:9,column:66}},loc:{start:{line:9,column:85},end:{line:42,column:1}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:32,column:7},end:{line:32,column:8}},loc:{start:{line:32,column:32},end:{line:40,column:5}},line:32}},branchMap:{"0":{loc:{start:{line:33,column:8},end:{line:38,column:9}},type:"if",locations:[{start:{line:33,column:8},end:{line:38,column:9}},{start:{line:33,column:8},end:{line:38,column:9}}],line:33}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var express=(cov_epoa6j5t0.s[0]++,require('express'));var mongoose=(cov_epoa6j5t0.s[1]++,require("mongoose"));var router=(cov_epoa6j5t0.s[2]++,express.Router());var dbUrl=(cov_epoa6j5t0.s[3]++,require("../config/configDB").url);var LogModels=(cov_epoa6j5t0.s[4]++,require("../models/logModels"));cov_epoa6j5t0.s[5]++;router.get("/dloud/drive/stats-file/:filename?/:fileId?/:year?",function(req,res){cov_epoa6j5t0.f[0]++;var lyear=(cov_epoa6j5t0.s[6]++,parseInt(req.query.year));var db=(cov_epoa6j5t0.s[7]++,mongoose.connect(dbUrl));cov_epoa6j5t0.s[8]++;LogModels.fileDownloadLog.aggregate([{"$match":{'filename':req.query.filename,'fileId':req.query.fileId,'updatedAt':{"$gte":new Date(lyear,0,1),"$lt":new Date(lyear+1,0,1)}}},{"$group":{"_id":{"location":"$location","month":{$month:"$updatedAt"}},"logCount":{"$sum":1}}},{"$group":{"_id":"$_id.location","logs":{"$push":{"month":"$_id.month","count":"$logCount"}},"count":{"$sum":"$logCount"}}}],function(err,downLogs){cov_epoa6j5t0.f[1]++;cov_epoa6j5t0.s[9]++;if(err){cov_epoa6j5t0.b[0][0]++;cov_epoa6j5t0.s[10]++;res.json({status:'ERROR'});}else{cov_epoa6j5t0.b[0][1]++;cov_epoa6j5t0.s[11]++;res.json(downLogs);}cov_epoa6j5t0.s[12]++;db.disconnect();});});cov_epoa6j5t0.s[13]++;module.exports=router;