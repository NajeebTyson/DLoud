var cov_21iq9t3etp=function(){var path='/home/najeeb/Workspace/webstorm/DocSync/routes/index.js',hash='c63d3a2c4016287fd3197a8b073b7b995f171928',Function=function(){}.constructor,global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/home/najeeb/Workspace/webstorm/DocSync/routes/index.js',statementMap:{'0':{start:{line:1,column:14},end:{line:1,column:32}},'1':{start:{line:2,column:15},end:{line:2,column:34}},'2':{start:{line:3,column:11},end:{line:3,column:26}},'3':{start:{line:4,column:9},end:{line:4,column:22}},'4':{start:{line:5,column:9},end:{line:5,column:28}},'5':{start:{line:6,column:13},end:{line:6,column:30}},'6':{start:{line:7,column:13},end:{line:7,column:29}},'7':{start:{line:10,column:12},end:{line:10,column:45}},'8':{start:{line:11,column:12},end:{line:11,column:38}},'9':{start:{line:12,column:16},end:{line:12,column:46}},'10':{start:{line:13,column:11},end:{line:13,column:36}},'11':{start:{line:15,column:24},end:{line:15,column:27}},'12':{start:{line:18,column:0},end:{line:29,column:3}},'13':{start:{line:19,column:4},end:{line:27,column:5}},'14':{start:{line:20,column:17},end:{line:20,column:40}},'15':{start:{line:21,column:8},end:{line:24,column:11}},'16':{start:{line:22,column:12},end:{line:22,column:28}},'17':{start:{line:23,column:12},end:{line:23,column:83}},'18':{start:{line:26,column:8},end:{line:26,column:46}},'19':{start:{line:31,column:0},end:{line:33,column:3}},'20':{start:{line:32,column:4},end:{line:32,column:47}},'21':{start:{line:36,column:0},end:{line:38,column:3}},'22':{start:{line:37,column:4},end:{line:37,column:55}},'23':{start:{line:40,column:0},end:{line:42,column:3}},'24':{start:{line:41,column:4},end:{line:41,column:72}},'25':{start:{line:44,column:0},end:{line:54,column:3}},'26':{start:{line:53,column:4},end:{line:53,column:81}},'27':{start:{line:56,column:0},end:{line:58,column:3}},'28':{start:{line:57,column:3},end:{line:57,column:53}},'29':{start:{line:60,column:0},end:{line:139,column:7}},'30':{start:{line:62,column:7},end:{line:70,column:8}},'31':{start:{line:63,column:20},end:{line:63,column:43}},'32':{start:{line:64,column:11},end:{line:67,column:14}},'33':{start:{line:65,column:15},end:{line:65,column:31}},'34':{start:{line:66,column:15},end:{line:66,column:83}},'35':{start:{line:69,column:11},end:{line:69,column:29}},'36':{start:{line:73,column:17},end:{line:73,column:40}},'37':{start:{line:74,column:8},end:{line:138,column:11}},'38':{start:{line:75,column:26},end:{line:75,column:27}},'39':{start:{line:76,column:12},end:{line:80,column:13}},'40':{start:{line:77,column:16},end:{line:79,column:17}},'41':{start:{line:78,column:20},end:{line:78,column:30}},'42':{start:{line:81,column:12},end:{line:81,column:53}},'43':{start:{line:82,column:24},end:{line:82,column:51}},'44':{start:{line:83,column:12},end:{line:137,column:13}},'45':{start:{line:84,column:31},end:{line:84,column:32}},'46':{start:{line:85,column:16},end:{line:89,column:17}},'47':{start:{line:86,column:20},end:{line:88,column:21}},'48':{start:{line:87,column:24},end:{line:87,column:57}},'49':{start:{line:90,column:16},end:{line:109,column:17}},'50':{start:{line:91,column:20},end:{line:98,column:23}},'51':{start:{line:96,column:23},end:{line:96,column:39}},'52':{start:{line:97,column:23},end:{line:97,column:131}},'53':{start:{line:100,column:20},end:{line:108,column:23}},'54':{start:{line:106,column:24},end:{line:106,column:40}},'55':{start:{line:107,column:24},end:{line:107,column:132}},'56':{start:{line:111,column:31},end:{line:111,column:32}},'57':{start:{line:112,column:16},end:{line:116,column:17}},'58':{start:{line:113,column:20},end:{line:115,column:21}},'59':{start:{line:114,column:24},end:{line:114,column:57}},'60':{start:{line:117,column:16},end:{line:136,column:17}},'61':{start:{line:118,column:20},end:{line:125,column:23}},'62':{start:{line:123,column:24},end:{line:123,column:40}},'63':{start:{line:124,column:24},end:{line:124,column:132}},'64':{start:{line:127,column:20},end:{line:135,column:23}},'65':{start:{line:133,column:24},end:{line:133,column:40}},'66':{start:{line:134,column:24},end:{line:134,column:84}},'67':{start:{line:141,column:0},end:{line:165,column:7}},'68':{start:{line:143,column:8},end:{line:143,column:54}},'69':{start:{line:146,column:22},end:{line:159,column:10}},'70':{start:{line:160,column:17},end:{line:160,column:40}},'71':{start:{line:161,column:8},end:{line:164,column:11}},'72':{start:{line:162,column:12},end:{line:162,column:28}},'73':{start:{line:163,column:12},end:{line:163,column:42}},'74':{start:{line:167,column:0},end:{line:173,column:3}},'75':{start:{line:168,column:13},end:{line:168,column:36}},'76':{start:{line:169,column:4},end:{line:172,column:7}},'77':{start:{line:170,column:8},end:{line:170,column:24}},'78':{start:{line:171,column:8},end:{line:171,column:74}},'79':{start:{line:175,column:0},end:{line:181,column:3}},'80':{start:{line:176,column:13},end:{line:176,column:36}},'81':{start:{line:177,column:4},end:{line:180,column:7}},'82':{start:{line:178,column:8},end:{line:178,column:24}},'83':{start:{line:179,column:8},end:{line:179,column:83}},'84':{start:{line:183,column:0},end:{line:185,column:3}},'85':{start:{line:184,column:4},end:{line:184,column:83}},'86':{start:{line:187,column:0},end:{line:189,column:3}},'87':{start:{line:188,column:4},end:{line:188,column:87}},'88':{start:{line:191,column:0},end:{line:201,column:3}},'89':{start:{line:192,column:13},end:{line:192,column:36}},'90':{start:{line:193,column:4},end:{line:193,column:35}},'91':{start:{line:194,column:4},end:{line:200,column:7}},'92':{start:{line:195,column:8},end:{line:197,column:9}},'93':{start:{line:196,column:12},end:{line:196,column:29}},'94':{start:{line:198,column:8},end:{line:198,column:24}},'95':{start:{line:199,column:8},end:{line:199,column:42}},'96':{start:{line:203,column:0},end:{line:209,column:3}},'97':{start:{line:204,column:13},end:{line:204,column:36}},'98':{start:{line:205,column:4},end:{line:208,column:7}},'99':{start:{line:206,column:8},end:{line:206,column:24}},'100':{start:{line:207,column:8},end:{line:207,column:79}},'101':{start:{line:211,column:0},end:{line:225,column:3}},'102':{start:{line:212,column:13},end:{line:212,column:36}},'103':{start:{line:213,column:4},end:{line:224,column:7}},'104':{start:{line:222,column:8},end:{line:222,column:24}},'105':{start:{line:223,column:8},end:{line:223,column:104}},'106':{start:{line:227,column:0},end:{line:270,column:3}},'107':{start:{line:229,column:17},end:{line:229,column:53}},'108':{start:{line:230,column:4},end:{line:230,column:25}},'109':{start:{line:232,column:4},end:{line:269,column:7}},'110':{start:{line:233,column:8},end:{line:233,column:104}},'111':{start:{line:234,column:8},end:{line:234,column:27}},'112':{start:{line:235,column:8},end:{line:268,column:11}},'113':{start:{line:236,column:21},end:{line:236,column:44}},'114':{start:{line:237,column:26},end:{line:248,column:14}},'115':{start:{line:249,column:12},end:{line:267,column:15}},'116':{start:{line:250,column:16},end:{line:250,column:91}},'117':{start:{line:251,column:16},end:{line:266,column:17}},'118':{start:{line:252,column:20},end:{line:252,column:46}},'119':{start:{line:253,column:20},end:{line:253,column:36}},'120':{start:{line:255,column:36},end:{line:261,column:22}},'121':{start:{line:262,column:20},end:{line:264,column:23}},'122':{start:{line:263,column:24},end:{line:263,column:40}},'123':{start:{line:265,column:20},end:{line:265,column:45}},'124':{start:{line:276,column:0},end:{line:276,column:24}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:18,column:16},end:{line:18,column:17}},loc:{start:{line:18,column:41},end:{line:29,column:1}},line:18},'1':{name:'(anonymous_1)',decl:{start:{line:21,column:255},end:{line:21,column:256}},loc:{start:{line:21,column:276},end:{line:24,column:9}},line:21},'2':{name:'(anonymous_2)',decl:{start:{line:31,column:20},end:{line:31,column:21}},loc:{start:{line:31,column:40},end:{line:33,column:1}},line:31},'3':{name:'(anonymous_3)',decl:{start:{line:36,column:22},end:{line:36,column:23}},loc:{start:{line:36,column:42},end:{line:38,column:1}},line:36},'4':{name:'(anonymous_4)',decl:{start:{line:40,column:23},end:{line:40,column:24}},loc:{start:{line:40,column:43},end:{line:42,column:1}},line:40},'5':{name:'(anonymous_5)',decl:{start:{line:44,column:37},end:{line:44,column:38}},loc:{start:{line:44,column:57},end:{line:54,column:1}},line:44},'6':{name:'(anonymous_6)',decl:{start:{line:56,column:22},end:{line:56,column:23}},loc:{start:{line:56,column:42},end:{line:58,column:1}},line:56},'7':{name:'(anonymous_7)',decl:{start:{line:61,column:9},end:{line:61,column:10}},loc:{start:{line:61,column:29},end:{line:71,column:5}},line:61},'8':{name:'(anonymous_8)',decl:{start:{line:64,column:44},end:{line:64,column:45}},loc:{start:{line:64,column:65},end:{line:67,column:12}},line:64},'9':{name:'(anonymous_9)',decl:{start:{line:72,column:10},end:{line:72,column:11}},loc:{start:{line:72,column:30},end:{line:139,column:5}},line:72},'10':{name:'(anonymous_10)',decl:{start:{line:74,column:41},end:{line:74,column:42}},loc:{start:{line:74,column:62},end:{line:138,column:9}},line:74},'11':{name:'(anonymous_11)',decl:{start:{line:95,column:28},end:{line:95,column:29}},loc:{start:{line:95,column:40},end:{line:98,column:21}},line:95},'12':{name:'(anonymous_12)',decl:{start:{line:105,column:28},end:{line:105,column:29}},loc:{start:{line:105,column:40},end:{line:108,column:21}},line:105},'13':{name:'(anonymous_13)',decl:{start:{line:122,column:28},end:{line:122,column:29}},loc:{start:{line:122,column:40},end:{line:125,column:21}},line:122},'14':{name:'(anonymous_14)',decl:{start:{line:132,column:28},end:{line:132,column:29}},loc:{start:{line:132,column:40},end:{line:135,column:21}},line:132},'15':{name:'(anonymous_15)',decl:{start:{line:142,column:9},end:{line:142,column:10}},loc:{start:{line:142,column:29},end:{line:144,column:5}},line:142},'16':{name:'(anonymous_16)',decl:{start:{line:145,column:10},end:{line:145,column:11}},loc:{start:{line:145,column:30},end:{line:165,column:5}},line:145},'17':{name:'(anonymous_17)',decl:{start:{line:161,column:21},end:{line:161,column:22}},loc:{start:{line:161,column:36},end:{line:164,column:9}},line:161},'18':{name:'(anonymous_18)',decl:{start:{line:167,column:28},end:{line:167,column:29}},loc:{start:{line:167,column:48},end:{line:173,column:1}},line:167},'19':{name:'(anonymous_19)',decl:{start:{line:169,column:101},end:{line:169,column:102}},loc:{start:{line:169,column:121},end:{line:172,column:5}},line:169},'20':{name:'(anonymous_20)',decl:{start:{line:175,column:32},end:{line:175,column:33}},loc:{start:{line:175,column:52},end:{line:181,column:1}},line:175},'21':{name:'(anonymous_21)',decl:{start:{line:177,column:100},end:{line:177,column:101}},loc:{start:{line:177,column:120},end:{line:180,column:5}},line:177},'22':{name:'(anonymous_22)',decl:{start:{line:183,column:30},end:{line:183,column:31}},loc:{start:{line:183,column:50},end:{line:185,column:1}},line:183},'23':{name:'(anonymous_23)',decl:{start:{line:187,column:34},end:{line:187,column:35}},loc:{start:{line:187,column:54},end:{line:189,column:1}},line:187},'24':{name:'(anonymous_24)',decl:{start:{line:191,column:37},end:{line:191,column:38}},loc:{start:{line:191,column:56},end:{line:201,column:1}},line:191},'25':{name:'(anonymous_25)',decl:{start:{line:194,column:63},end:{line:194,column:64}},loc:{start:{line:194,column:84},end:{line:200,column:5}},line:194},'26':{name:'(anonymous_26)',decl:{start:{line:203,column:33},end:{line:203,column:34}},loc:{start:{line:203,column:53},end:{line:209,column:1}},line:203},'27':{name:'(anonymous_27)',decl:{start:{line:205,column:37},end:{line:205,column:38}},loc:{start:{line:205,column:58},end:{line:208,column:5}},line:205},'28':{name:'(anonymous_28)',decl:{start:{line:211,column:47},end:{line:211,column:48}},loc:{start:{line:211,column:67},end:{line:225,column:1}},line:211},'29':{name:'(anonymous_29)',decl:{start:{line:221,column:7},end:{line:221,column:8}},loc:{start:{line:221,column:30},end:{line:224,column:5}},line:221},'30':{name:'(anonymous_30)',decl:{start:{line:227,column:41},end:{line:227,column:42}},loc:{start:{line:227,column:67},end:{line:270,column:1}},line:227},'31':{name:'(anonymous_31)',decl:{start:{line:232,column:26},end:{line:232,column:27}},loc:{start:{line:232,column:63},end:{line:269,column:5}},line:232},'32':{name:'(anonymous_32)',decl:{start:{line:235,column:28},end:{line:235,column:29}},loc:{start:{line:235,column:40},end:{line:268,column:9}},line:235},'33':{name:'(anonymous_33)',decl:{start:{line:249,column:25},end:{line:249,column:26}},loc:{start:{line:249,column:51},end:{line:267,column:13}},line:249},'34':{name:'(anonymous_34)',decl:{start:{line:262,column:35},end:{line:262,column:36}},loc:{start:{line:262,column:47},end:{line:264,column:21}},line:262}},branchMap:{'0':{loc:{start:{line:19,column:4},end:{line:27,column:5}},type:'if',locations:[{start:{line:19,column:4},end:{line:27,column:5}},{start:{line:19,column:4},end:{line:27,column:5}}],line:19},'1':{loc:{start:{line:62,column:7},end:{line:70,column:8}},type:'if',locations:[{start:{line:62,column:7},end:{line:70,column:8}},{start:{line:62,column:7},end:{line:70,column:8}}],line:62},'2':{loc:{start:{line:77,column:16},end:{line:79,column:17}},type:'if',locations:[{start:{line:77,column:16},end:{line:79,column:17}},{start:{line:77,column:16},end:{line:79,column:17}}],line:77},'3':{loc:{start:{line:83,column:12},end:{line:137,column:13}},type:'if',locations:[{start:{line:83,column:12},end:{line:137,column:13}},{start:{line:83,column:12},end:{line:137,column:13}}],line:83},'4':{loc:{start:{line:86,column:20},end:{line:88,column:21}},type:'if',locations:[{start:{line:86,column:20},end:{line:88,column:21}},{start:{line:86,column:20},end:{line:88,column:21}}],line:86},'5':{loc:{start:{line:90,column:16},end:{line:109,column:17}},type:'if',locations:[{start:{line:90,column:16},end:{line:109,column:17}},{start:{line:90,column:16},end:{line:109,column:17}}],line:90},'6':{loc:{start:{line:113,column:20},end:{line:115,column:21}},type:'if',locations:[{start:{line:113,column:20},end:{line:115,column:21}},{start:{line:113,column:20},end:{line:115,column:21}}],line:113},'7':{loc:{start:{line:117,column:16},end:{line:136,column:17}},type:'if',locations:[{start:{line:117,column:16},end:{line:136,column:17}},{start:{line:117,column:16},end:{line:136,column:17}}],line:117},'8':{loc:{start:{line:195,column:8},end:{line:197,column:9}},type:'if',locations:[{start:{line:195,column:8},end:{line:197,column:9}},{start:{line:195,column:8},end:{line:197,column:9}}],line:195},'9':{loc:{start:{line:251,column:16},end:{line:266,column:17}},type:'if',locations:[{start:{line:251,column:16},end:{line:266,column:17}},{start:{line:251,column:16},end:{line:266,column:17}}],line:251}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0,'63':0,'64':0,'65':0,'66':0,'67':0,'68':0,'69':0,'70':0,'71':0,'72':0,'73':0,'74':0,'75':0,'76':0,'77':0,'78':0,'79':0,'80':0,'81':0,'82':0,'83':0,'84':0,'85':0,'86':0,'87':0,'88':0,'89':0,'90':0,'91':0,'92':0,'93':0,'94':0,'95':0,'96':0,'97':0,'98':0,'99':0,'100':0,'101':0,'102':0,'103':0,'104':0,'105':0,'106':0,'107':0,'108':0,'109':0,'110':0,'111':0,'112':0,'113':0,'114':0,'115':0,'116':0,'117':0,'118':0,'119':0,'120':0,'121':0,'122':0,'123':0,'124':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0],'9':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var express=(cov_21iq9t3etp.s[0]++,require('express'));var mongoose=(cov_21iq9t3etp.s[1]++,require('mongoose'));var path=(cov_21iq9t3etp.s[2]++,require('path'));var os=(cov_21iq9t3etp.s[3]++,require('os'));var fs=(cov_21iq9t3etp.s[4]++,require('fs-extra'));var Busboy=(cov_21iq9t3etp.s[5]++,require('busboy'));var router=(cov_21iq9t3etp.s[6]++,express.Router());// var FS = require('fs');
var dbUrl=(cov_21iq9t3etp.s[7]++,require("../config/configDB").url);var Drive=(cov_21iq9t3etp.s[8]++,require("../models/drive"));var LogModels=(cov_21iq9t3etp.s[9]++,require("../models/logModels"));var Quiz=(cov_21iq9t3etp.s[10]++,require("../models/quiz"));const PassingCriteria=(cov_21iq9t3etp.s[11]++,0.8);/* GET home page. */cov_21iq9t3etp.s[12]++;router.get('/',function(req,res,next){cov_21iq9t3etp.f[0]++;cov_21iq9t3etp.s[13]++;if(req.user){cov_21iq9t3etp.b[0][0]++;var db=(cov_21iq9t3etp.s[14]++,mongoose.connect(dbUrl));cov_21iq9t3etp.s[15]++;Quiz.find({'ready':true},{'title':1,'countQuestions':1,'_id':1,'passedUsers':{'$elemMatch':{'pUser':req.user._id}},'failedUsers':{'$elemMatch':{'pUser':req.user._id}}})/*.select('title countQuestions _id')*/.sort('-createdAt').exec(function(err,docs){cov_21iq9t3etp.f[1]++;cov_21iq9t3etp.s[16]++;db.disconnect();cov_21iq9t3etp.s[17]++;res.render('index',{title:'DLoud',quizzes:docs,pageUrl:'home'});});}else{cov_21iq9t3etp.b[0][1]++;cov_21iq9t3etp.s[18]++;res.render('index',{title:'DLoud'});}});cov_21iq9t3etp.s[19]++;router.get('/help',function(req,res){cov_21iq9t3etp.f[2]++;cov_21iq9t3etp.s[20]++;res.render('help',{title:'Help | DLoud'});});cov_21iq9t3etp.s[21]++;router.get('/updown',function(req,res){cov_21iq9t3etp.f[3]++;cov_21iq9t3etp.s[22]++;res.render('temporary',{title:'Upload Download'});});cov_21iq9t3etp.s[23]++;router.post('/updown',function(req,res){cov_21iq9t3etp.f[4]++;cov_21iq9t3etp.s[24]++;res.json({"url":"http://localhost:3000/updown/download/file.jpg"});});cov_21iq9t3etp.s[25]++;router.get('/updown/download/:file',function(req,res){cov_21iq9t3etp.f[5]++;cov_21iq9t3etp.s[26]++;// var img = FS.readFileSync(__dirname + '//../public/assets/images/cover.jpg');
// res.download(img);
// fs.readFile(__dirname + '//../public/assets/images/cover.jpg', "utf8", function(err, data){
//     if(err) throw err;
//
//     res.download(data);
// });
res.download(__dirname+'//../public/assets/images/cover.jpg','myfile.jpg');});cov_21iq9t3etp.s[27]++;router.get('/portal',function(req,res){cov_21iq9t3etp.f[6]++;cov_21iq9t3etp.s[28]++;res.render('portal',{title:'Portal - DocSync'});});cov_21iq9t3etp.s[29]++;router.route('/quiz/answer/:quizId').get(function(req,res){cov_21iq9t3etp.f[7]++;cov_21iq9t3etp.s[30]++;if(req.params.quizId){cov_21iq9t3etp.b[1][0]++;var db=(cov_21iq9t3etp.s[31]++,mongoose.connect(dbUrl));cov_21iq9t3etp.s[32]++;Quiz.findById(req.params.quizId,function(err,quiz){cov_21iq9t3etp.f[8]++;cov_21iq9t3etp.s[33]++;db.disconnect();cov_21iq9t3etp.s[34]++;res.render('solveQuiz',{title:'Solve | '+quiz.title,quiz:quiz});});}else{cov_21iq9t3etp.b[1][1]++;cov_21iq9t3etp.s[35]++;res.redirect('/');}}).post(function(req,res){cov_21iq9t3etp.f[9]++;var db=(cov_21iq9t3etp.s[36]++,mongoose.connect(dbUrl));cov_21iq9t3etp.s[37]++;Quiz.findById(req.params.quizId,function(err,quiz){cov_21iq9t3etp.f[10]++;var correct=(cov_21iq9t3etp.s[38]++,0);cov_21iq9t3etp.s[39]++;for(var i=0;i<quiz.countQuestions;i++){cov_21iq9t3etp.s[40]++;if(req.body['q-'+(i+1)]===quiz.questions[i].correctOption){cov_21iq9t3etp.b[2][0]++;cov_21iq9t3etp.s[41]++;correct++;}else{cov_21iq9t3etp.b[2][1]++;}}cov_21iq9t3etp.s[42]++;console.log('Correct answers: '+correct);var score=(cov_21iq9t3etp.s[43]++,correct/quiz.countQuestions);cov_21iq9t3etp.s[44]++;if(score>=PassingCriteria){cov_21iq9t3etp.b[3][0]++;var pCounter=(cov_21iq9t3etp.s[45]++,1);cov_21iq9t3etp.s[46]++;for(var l=0;l<quiz.passed.length;l++){cov_21iq9t3etp.s[47]++;if(quiz.passed[l][location]===req.user.area){cov_21iq9t3etp.b[4][0]++;cov_21iq9t3etp.s[48]++;pCounter=quiz.passed[l].counter;}else{cov_21iq9t3etp.b[4][1]++;}}cov_21iq9t3etp.s[49]++;if(pCounter>1){cov_21iq9t3etp.b[5][0]++;cov_21iq9t3etp.s[50]++;Quiz.findByIdAndUpdate(req.params.quizId,{'$set':{'passed.$.counter':counter}}).exec(function(){cov_21iq9t3etp.f[11]++;cov_21iq9t3etp.s[51]++;db.disconnect();cov_21iq9t3etp.s[52]++;res.render('quizResult',{title:'Result | '+quiz.title,qTitle:quiz.title,score:Math.round(score*100)});});}else{cov_21iq9t3etp.b[5][1]++;cov_21iq9t3etp.s[53]++;Quiz.findByIdAndUpdate(req.params.quizId,{"$push":{'passed':{'location':req.user.area,counter:pCounter},'passedUsers':{'pUser':req.user._id,'corrects':correct}}}).exec(function(){cov_21iq9t3etp.f[12]++;cov_21iq9t3etp.s[54]++;db.disconnect();cov_21iq9t3etp.s[55]++;res.render('quizResult',{title:'Result | '+quiz.title,qTitle:quiz.title,score:Math.round(score*100)});});}}else{cov_21iq9t3etp.b[3][1]++;var pCounter=(cov_21iq9t3etp.s[56]++,1);cov_21iq9t3etp.s[57]++;for(var l=0;l<quiz.failed.length;l++){cov_21iq9t3etp.s[58]++;if(quiz.failed[l][location]===req.user.area){cov_21iq9t3etp.b[6][0]++;cov_21iq9t3etp.s[59]++;pCounter=quiz.failed[l].counter;}else{cov_21iq9t3etp.b[6][1]++;}}cov_21iq9t3etp.s[60]++;if(pCounter>1){cov_21iq9t3etp.b[7][0]++;cov_21iq9t3etp.s[61]++;Quiz.findByIdAndUpdate(req.params.quizId,{'$set':{'failed.$.counter':counter}}).exec(function(){cov_21iq9t3etp.f[13]++;cov_21iq9t3etp.s[62]++;db.disconnect();cov_21iq9t3etp.s[63]++;res.render('quizResult',{title:'Result | '+quiz.title,qTitle:quiz.title,score:Math.round(score*100)});});}else{cov_21iq9t3etp.b[7][1]++;cov_21iq9t3etp.s[64]++;Quiz.findByIdAndUpdate(req.params.quizId,{"$push":{'failed':{'location':req.user.area,counter:pCounter},'failedUsers':{'pUser':req.user._id,'corrects':correct,qTitle:quiz.title,score:Math.round(score*100)}}}).exec(function(){cov_21iq9t3etp.f[14]++;cov_21iq9t3etp.s[65]++;db.disconnect();cov_21iq9t3etp.s[66]++;res.render('quizResult',{title:'Result | '+quiz.title});});}}});});cov_21iq9t3etp.s[67]++;router.route('/new-quiz').get(function(req,res){cov_21iq9t3etp.f[15]++;cov_21iq9t3etp.s[68]++;res.render('newQuiz',{title:'Create Quiz'});}).post(function(req,res){cov_21iq9t3etp.f[16]++;var newQuiz=(cov_21iq9t3etp.s[69]++,new Quiz({title:req.body.title,ready:false,countQuestions:0,questions:[],creator:{name:req.user.local.username,id:req.user._id},passed:[],failed:[],passedUsers:[],failedUsers:[]}));var db=(cov_21iq9t3etp.s[70]++,mongoose.connect(dbUrl));cov_21iq9t3etp.s[71]++;newQuiz.save(function(err){cov_21iq9t3etp.f[17]++;cov_21iq9t3etp.s[72]++;db.disconnect();cov_21iq9t3etp.s[73]++;res.redirect('/hold-quizzes');});});cov_21iq9t3etp.s[74]++;router.get('/hold-quizzes',function(req,res){cov_21iq9t3etp.f[18]++;var db=(cov_21iq9t3etp.s[75]++,mongoose.connect(dbUrl));cov_21iq9t3etp.s[76]++;Quiz.find({'ready':false}).select('title countQuestions createdAt _id').sort('-createdAt').exec(function(err,docs){cov_21iq9t3etp.f[19]++;cov_21iq9t3etp.s[77]++;db.disconnect();cov_21iq9t3etp.s[78]++;res.render('holdQuizzes',{title:'Hold Quizzes',quizzes:docs});});});cov_21iq9t3etp.s[79]++;router.get('/complete-quizzes',function(req,res){cov_21iq9t3etp.f[20]++;var db=(cov_21iq9t3etp.s[80]++,mongoose.connect(dbUrl));cov_21iq9t3etp.s[81]++;Quiz.find({'ready':true}).select('title countQuestions createdAt _id').sort('-createdAt').exec(function(err,docs){cov_21iq9t3etp.f[21]++;cov_21iq9t3etp.s[82]++;db.disconnect();cov_21iq9t3etp.s[83]++;res.render('completeQuizzes',{title:'Completed Quizzes',quizzes:docs});});});cov_21iq9t3etp.s[84]++;router.get('/hold-quiz/:qId',function(req,res){cov_21iq9t3etp.f[22]++;cov_21iq9t3etp.s[85]++;res.render('holdQuiz',{title:'Quiz | '+req.params.qId,qId:req.params.qId});});cov_21iq9t3etp.s[86]++;router.get('/complete-quiz/:qId',function(req,res){cov_21iq9t3etp.f[23]++;cov_21iq9t3etp.s[87]++;res.render('completeQuiz',{title:'Quiz | '+req.params.qId,qId:req.params.qId});});cov_21iq9t3etp.s[88]++;router.get('/quiz/complete/:quizId',function(req,res){cov_21iq9t3etp.f[24]++;var db=(cov_21iq9t3etp.s[89]++,mongoose.connect(dbUrl));cov_21iq9t3etp.s[90]++;console.log(req.params.quizId);cov_21iq9t3etp.s[91]++;Quiz.findByIdAndUpdate(req.params.quizId,{'ready':true},function(err,quiz){cov_21iq9t3etp.f[25]++;cov_21iq9t3etp.s[92]++;if(err){cov_21iq9t3etp.b[8][0]++;cov_21iq9t3etp.s[93]++;console.log(err);}else{cov_21iq9t3etp.b[8][1]++;}cov_21iq9t3etp.s[94]++;db.disconnect();cov_21iq9t3etp.s[95]++;res.redirect('/complete-quizzes');});});cov_21iq9t3etp.s[96]++;router.get('/quiz/stat/:quizId',function(req,res){cov_21iq9t3etp.f[26]++;var db=(cov_21iq9t3etp.s[97]++,mongoose.connect(dbUrl));cov_21iq9t3etp.s[98]++;Quiz.findById(req.params.quizId,function(err,quiz){cov_21iq9t3etp.f[27]++;cov_21iq9t3etp.s[99]++;db.disconnect();cov_21iq9t3etp.s[100]++;res.render('quizStat',{title:'Quiz stat | '+quiz.title,quiz:quiz});});});cov_21iq9t3etp.s[101]++;router.get('/dloud/stats/:filename?/:fileId?',function(req,res){cov_21iq9t3etp.f[28]++;var db=(cov_21iq9t3etp.s[102]++,mongoose.connect(dbUrl));cov_21iq9t3etp.s[103]++;LogModels.fileDownloadLog.aggregate([{"$group":{"_id":{"year":{$year:"$updatedAt"}}}}],function(err,yearsL){cov_21iq9t3etp.f[29]++;cov_21iq9t3etp.s[104]++;db.disconnect();cov_21iq9t3etp.s[105]++;res.render('fileStat',{title:req.query.filename,fileId:req.query.fileId,logYears:yearsL});});});cov_21iq9t3etp.s[106]++;router.post('/uploadFile:parentFolder?',function(req,res,next){cov_21iq9t3etp.f[30]++;var fstream;var busboy=(cov_21iq9t3etp.s[107]++,new Busboy({headers:req.headers}));cov_21iq9t3etp.s[108]++;req.pipe(req.busboy);cov_21iq9t3etp.s[109]++;req.busboy.on('file',function(fieldname,file,filename){cov_21iq9t3etp.f[31]++;cov_21iq9t3etp.s[110]++;fstream=fs.createWriteStream(__dirname+'/../public/upload/'+fieldname+path.extname(filename));cov_21iq9t3etp.s[111]++;file.pipe(fstream);cov_21iq9t3etp.s[112]++;fstream.on('close',function(){cov_21iq9t3etp.f[32]++;var db=(cov_21iq9t3etp.s[113]++,mongoose.connect(dbUrl));var newFile=(cov_21iq9t3etp.s[114]++,new Drive({name:fieldname,shortname:fieldname.toLowerCase(),fType:'file',parent:req.query.parentFolder,childs:null,creator:req.user._id,data:{content:fs.readFileSync(__dirname+'/../public/upload/'+fieldname+path.extname(filename)),contentType:path.extname(filename)}}));cov_21iq9t3etp.s[115]++;newFile.save(function(err,savedFile){cov_21iq9t3etp.f[33]++;cov_21iq9t3etp.s[116]++;fs.unlink(__dirname+'/../public/upload/'+fieldname+path.extname(filename));cov_21iq9t3etp.s[117]++;if(err){cov_21iq9t3etp.b[9][0]++;cov_21iq9t3etp.s[118]++;res.json({status:false});cov_21iq9t3etp.s[119]++;db.disconnect();}else{cov_21iq9t3etp.b[9][1]++;var newUpFile=(cov_21iq9t3etp.s[120]++,new LogModels.fileUploadLog({username:req.user.local.username,userId:req.user._id,fileId:savedFile._id,filename:savedFile.name,userIp:req._remoteAddress}));cov_21iq9t3etp.s[121]++;newUpFile.save(function(){cov_21iq9t3etp.f[34]++;cov_21iq9t3etp.s[122]++;db.disconnect();});cov_21iq9t3etp.s[123]++;res.json({status:true});}});});});});/*router.get("/ip", function (req, res) {
    res.json({IP: req.connection.remoteAddress, X_IP: req.headers['x-forwarded-for']});
});*/cov_21iq9t3etp.s[124]++;module.exports=router;